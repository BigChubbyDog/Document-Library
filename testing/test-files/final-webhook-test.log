ğŸš€ Initializing Production Webhook Server...
ğŸŒ Environment: development
ğŸ”§ Port: 3000
ğŸ”§ Initializing processors...
âœ… Google Ads lead processor initialized
ğŸš€ Initializing Enhanced Conversions Manager...
ğŸ“¥ Loading credentials...
âœ… Credentials loaded successfully

ğŸ‰ PRODUCTION WEBHOOK SERVER STARTED
============================================================
ğŸŒ Server running on port 3000
ğŸ”— Health check: http://localhost:3000/health
ğŸ“Š Status endpoint: http://localhost:3000/status
ğŸ“ˆ Metrics: http://localhost:3000/metrics

ğŸ“ Available webhook endpoints:
   â€¢ /webhook/google-ads/conversion - Google Ads conversion tracking
   â€¢ /webhook/google-ads/enhanced-conversion - Google Ads enhanced conversions
   â€¢ /webhook/twilio/call-completed - Twilio call completion notifications
   â€¢ /webhook/twilio/sms-received - Twilio SMS notifications
   â€¢ /webhook/facebook/conversions - Facebook conversions API
   â€¢ /webhook/lead-capture - Generic lead capture from website forms
   â€¢ /webhook/mortgage-application - Mortgage application submissions
============================================================
ğŸ”§ Initializing Google Ads client...
âœ… Google Ads client initialized
ğŸ” Verifying enhanced conversions eligibility...
ğŸš€ Production webhook server is ready to receive requests!
ğŸ“‹ Customer account status: 2
âœ… Enhanced conversions eligibility verified
âœ… Enhanced Conversions Manager initialized
âœ… Enhanced conversions manager initialized
âœ… Twilio integration ready (via enhanced conversions)
ğŸ”§ Configuring middleware...
âœ… Middleware configured
ğŸ”§ Configuring webhook routes...
ğŸ“ Configured /webhook/google-ads/conversion (Google Ads conversion tracking)
ğŸ“ Configured /webhook/google-ads/enhanced-conversion (Google Ads enhanced conversions)
ğŸ“ Configured /webhook/twilio/call-completed (Twilio call completion notifications)
ğŸ“ Configured /webhook/twilio/sms-received (Twilio SMS notifications)
ğŸ“ Configured /webhook/facebook/conversions (Facebook conversions API)
ğŸ“ Configured /webhook/lead-capture (Generic lead capture from website forms)
ğŸ“ Configured /webhook/mortgage-application (Mortgage application submissions)
âœ… Webhook routes configured
ğŸ”§ Configuring monitoring endpoints...
âœ… Monitoring endpoints configured
ğŸ”§ Configuring error handling...
âœ… Error handling configured
âœ… Production Webhook Server initialized
GET /health - 200 (2ms) [::1]
ğŸ“¥ Processing lead_capture webhook: {
  ip: '::1',
  userAgent: 'axios/1.11.0',
  timestamp: '2025-09-01T00:07:26.666Z'
}
ğŸ¯ Processing lead capture...
ğŸ¯ Processing Google Ads lead...
ğŸ” Enriching lead data...
ğŸ“Š Calculating lead score...
âœ… Qualifying lead...
ğŸ¯ Routing lead...
ğŸ”— Executing integrations...
ğŸ’¾ Lead record saved: /Users/logan/Mortgage-Campaign-Intelligence/leads/google-ads/lead-GADS_1756685246667_dh9rwynat-2025-09-01T00-07-26-667Z.json
âœ… Lead processed successfully: GADS_1756685246667_dh9rwynat
ğŸ“Š Lead Score: 90/100
ğŸ¯ Qualification: qualified
ğŸ”„ Routing: urgent priority to senior_loan_officer
âœ… Webhook processed successfully (2ms)
POST /webhook/lead-capture - 200 (2ms) [::1]
ğŸ“¥ Processing google_ads_conversion webhook: {
  ip: '::1',
  userAgent: 'axios/1.11.0',
  timestamp: '2025-09-01T00:07:26.670Z'
}
ğŸ¯ Processing Google Ads conversion...
ğŸ¯ Processing Google Ads lead...
ğŸ” Enriching lead data...
ğŸ“Š Calculating lead score...
âœ… Qualifying lead...
ğŸ¯ Routing lead...
ğŸ”— Executing integrations...
ğŸ’¾ Lead record saved: /Users/logan/Mortgage-Campaign-Intelligence/leads/google-ads/lead-GADS_1756685246670_itudxhoha-2025-09-01T00-07-26-670Z.json
âœ… Lead processed successfully: GADS_1756685246670_itudxhoha
ğŸ“Š Lead Score: 90/100
ğŸ¯ Qualification: qualified
ğŸ”„ Routing: high priority to senior_loan_officer
âœ… Webhook processed successfully (0ms)
POST /webhook/google-ads/conversion - 200 (1ms) [::1]
ğŸ“¥ Processing enhanced_conversion webhook: {
  ip: '::1',
  userAgent: 'axios/1.11.0',
  timestamp: '2025-09-01T00:07:26.671Z'
}
ğŸš€ Processing enhanced conversion...
ğŸ¯ Processing enhanced conversion: mortgage_application
ğŸ”„ Normalizing customer data...
âŒ Enhanced conversion processing failed for mortgage_application: this.validateRequiredData is not a function
âŒ Webhook processing failed (0ms): this.logConversionError is not a function
POST /webhook/google-ads/enhanced-conversion - 500 (1ms) [::1]
POST /webhook/twilio/call-completed - 401 (31ms) [::1]
POST /webhook/twilio/sms-received - 401 (1ms) [::1]
POST /webhook/lead-capture - 401 (1ms) [::1]
GET /health - 200 (0ms) [::1]
GET /health - 200 (1ms) [::1]
GET /health - 200 (0ms) [::1]
GET /health - 200 (0ms) [::1]
GET /health - 200 (0ms) [::1]
GET /nonexistent-endpoint - 404 (0ms) [::1]

ğŸ”„ Received SIGTERM, shutting down gracefully...
âœ… Webhook server shut down successfully
